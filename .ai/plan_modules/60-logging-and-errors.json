{
  "module": {
    "name": "logging-and-errors",
    "description": "Structured logging config, error event schema, and test scaffold"
  },
  "ops": [
    {
      "op": "write_file",
      "path": ".ai/schemas/error_event.schema.json",
      "content_base64": "ewogICIkc2NoZW1hIjogImh0dHA6Ly9qc29uLXNjaGVtYS5vcmcvZHJhZnQtMDcvc2NoZW1hIyIsCiAgIiRpZCI6ICJlcnJvcl9ldmVudC5zY2hlbWEuanNvbiIsCiAgInR5cGUiOiAib2JqZWN0IiwKICAicmVxdWlyZWQiOiBbImtpbmQiLCAiZXJyb3JfY29kZSIsICJtZXNzYWdlIiwgInRpbWVzdGFtcCIsICJ0cmFjZV9pZCJdLAogICJwcm9wZXJ0aWVzIjogewogICAgImtpbmQiOiB7InR5cGUiOiAic3RyaW5nIiwgImNvbnN0IjogImVycm9yIn0sCiAgICAiZXJyb3JfY29kZSI6IHsidHlwZSI6ICJzdHJpbmcifSwKICAgICJtZXNzYWdlIjogeyJ0eXBlIjogInN0cmluZyJ9LAogICAgInNldmVyaXR5IjogeyJ0eXBlIjogInN0cmluZyIsICJlbnVtIjogWyJDUklUSUNBTCIsIkhJR0giLCJNRURJVU0iLCJMT1ciLCJJTkZPIl19LAogICAgInRpbWVzdGFtcCI6IHsidHlwZSI6ICJzdHJpbmciLCAiZm9ybWF0IjogImRhdGUtdGltZSJ9LAogICAgInRyYWNlX2lkIjogeyJ0eXBlIjogInN0cmluZyJ9LAogICAgInNwYW5faWQiOiB7InR5cGUiOiAic3RyaW5nIn0sCiAgICAiY29udGV4dCI6IHsidHlwZSI6ICJvYmplY3QiLCAiYWRkaXRpb25hbFByb3BlcnRpZXMiOiB0cnVlfSwKICAgICJleGNlcHRpb24iOiB7InR5cGUiOiAib2JqZWN0IiwgInByb3BlcnRpZXMiOiB7InR5cGUiOiB7InR5cGUiOiAic3RyaW5nIn0sICJ2YWx1ZSI6IHsidHlwZSI6ICJzdHJpbmcifSwgInN0YWNrdHJhY2UiOiB7InR5cGUiOiAic3RyaW5nIn19LCAiYWRkaXRpb25hbFJvcGVydGllcyI6IHRydWV9LAogICAgImNhdXNlcyI6IHsidHlwZSI6ICJhcnJheSIsICJpdGVtcyI6IHsidHlwZSI6ICJzdHJpbmcifX0sCiAgICAidGFncyI6IHsidHlwZSI6ICJhcnJheSIsICJpdGVtcyI6IHsidHlwZSI6ICJzdHJpbmcifX0sCiAgICAic2VydmljZSI6IHsidHlwZSI6ICJvYmplY3QiLCAicHJvcGVydGllcyI6IHsibmFtZSI6IHsidHlwZSI6ICJzdHJpbmcifSwgInZlcnNpb24iOiB7InR5cGUiOiAic3RyaW5nIn19LCAiYWRkaXRpb25hbFJvcGVydGllcyI6IHRydWV9LAogICAgImhvc3QiOiB7InR5cGUiOiAib2JqZWN0IiwgInByb3BlcnRpZXMiOiB7Imhvc3RuYW1lIjogeyJ0eXBlIjogInN0cmluZyJ9LCAiaXAiOiB7InR5cGUiOiAic3RyaW5nIn19LCAiYWRkaXRpb25hbFJvcGVydGllcyI6IHRydWV9CiAgfSwKICAiYWRkaXRpb25hbFJvcGVydGllcyI6IHRydWUKfQ==",
      "if_exists": "skip",
      "phase": "apply",
      "dry_run_effect": "noop"
    },
    {
      "op": "write_file",
      "path": "config/logging.yaml",
      "content_base64": "dmVyc2lvbjogMQpmb3JtYXR0ZXJzOgogIHN0YW5kYXJkOgogICAgZm9ybWF0OiAiJShhc2N0aW1lKXMgJShsZXZlbG5hbWUpcyAlKG5hbWUpczogJShtZXNzYWdlKXMiCiAganNvbjoKICAgIGNsYXNzOiBweXRob25qc29ubG9nZ2VyLmpzb25sb2dnZXIuSnNvbkZvcm1hdHRlcgogICAgZm9ybWF0OiAiJShhc2N0aW1lKXMgJShsZXZlbG5hbWUpcyAlKG5hbWUpcyAlKG1lc3NhZ2UpcyAlKHRyYWNlX2lkKXMgJShzcGFuX2lkKXMiCmhhbmRsZXJzOgogIGNvbnNvbGU6CiAgICBjbGFzczogbG9nZ2luZy5TdHJlYW1IYW5kbGVyCiAgICBsZXZlbDogSU5GTwogICAgZm9ybWF0dGVyOiBzdGFuZGFyZAogICAgc3RyZWFtOiBleHQ6Ly9zeXMuc3Rkb3V0CiAgY29uc29sZV9qc29uOgogICAgY2xhc3M6IGxvZ2dpbmcuU3RyZWFtSGFuZGxlcgogICAgbGV2ZWw6IElORk8KICAgIGZvcm1hdHRlcjoganNvbgogICAgc3RyZWFtOiBleHQ6Ly9zeXMuc3Rkb3V0CmxvZ2dlcnM6IHt9CnJvb3Q6CiAgbGV2ZWw6IElORk8KICBoYW5kbGVyczogWyJjb25zb2xlIl0=",
      "if_exists": "skip",
      "phase": "apply",
      "dry_run_effect": "noop"
    },
    {
      "op": "write_file",
      "path": "lib/logging_setup.py",
      "content_base64": "aW1wb3J0IGxvZ2dpbmcKaW1wb3J0IGxvZ2dpbmcuY29uZmlnCmltcG9ydCBvcwpmcm9tIHBhdGhsaWIgaW1wb3J0IFBhdGgKCnRyeToKICAgIGltcG9ydCB5YW1sICAjIHR5cGU6IGlnbm9yZQpleGNlcHQgRXhjZXB0aW9uOgogICAgeWFtbCA9IE5vbmUKCgpkZWYgc2V0dXBfbG9nZ2luZyhjb25maWdfcGF0aDogc3RyID0gImNvbmZpZy9sb2dnaW5nLnlhbWwiLCBsZXZlbDogc3RyIHwgTm9uZSA9IE5vbmUsIGZvcmNlX2pzb246IGJvb2wgfCBOb25lID0gTm9uZSkgLT4gbG9nZ2luZy5Mb2dnZXI6CiAgICAiIiJTZXR1cCBsb2dnaW5nIHVzaW5nIFlBTUwgY29uZmlnIGlmIGF2YWlsYWJsZTsgZmFsbGJhY2sgdG8gYmFzaWMgY29uZmlnLgogICAgQXJnczoKICAgICAgICBjb25maWdfcGF0aDogUGF0aCB0byBZQU1MIGRpY3RDb25maWcuCiAgICAgICAgbGV2ZWw6IFJvb3QgbGV2ZWwgaWYgZmFsbGluZyBiYWNrLgogICAgICAgIGZvcmNlX2pzb246IElmIFRydWUsIHByZWZlciBKU09OIGZvcm1hdHRlciB3aGVuIGF2YWlsYWJsZS4KICAgIFJldHVybnM6IGEgbW9kdWxlIGxvZ2dlciBmb3IgY29udmVuaWVuY2UuCiAgICAiIiIKICAgIGRlc2lyZWRfbGV2ZWwgPSBnZXRhdHRyKGxvZ2dpbmcsIChsZXZlbCBvciBvcy5nZXRlbnYoIkxPR19MRVZFTCIsICJJTkZPIikpLnVwcGVyKCksIGxvZ2dpbmcuSU5GTykKCiAgICBpZiBQYXRoKGNvbmZpZ19wYXRoKS5leGlzdHMoKSBhbmQgeWFtbCBpcyBub3QgTm9uZToKICAgICAgICB3aXRoIG9wZW4oY29uZmlnX3BhdGgsICJyIiwgZW5jb2Rpbmc9InV0Zi04IikgYXMgZjoKICAgICAgICAgICAgY2ZnID0geWFtbC5zYWZlX2xvYWQoZikKICAgICAgICBpZiBmb3JjZV9qc29uIG9yIG9zLmdldGVudigiTE9HX0pTT04iLCAiZmFsc2UiKS5sb3dlcigpIGluIHsiMSIsInRydWUiLCJ5ZXMifToKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgcm9vdF9jZmcgPSBjZmcuc2V0ZGVmYXVsdCgicm9vdCIsIHt9KQogICAgICAgICAgICAgICAgcm9vdF9jZmdbImhhbmRsZXJzIl0gPSBbImNvbnNvbGVfanNvbiJdCiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb246CiAgICAgICAgICAgICAgICBwYXNzCiAgICAgICAgbG9nZ2luZy5jb25maWcuZGljdENvbmZpZyhjZmcpCiAgICBlbHNlOgogICAgICAgIGxvZ2dpbmcuYmFzaWNDb25maWcobGV2ZWw9ZGVzaXJlZF9sZXZlbCwgZm9ybWF0PSIlKGFzY3RpbWUpcyAlKGxldmVsbmFtZSlzICUobmFtZSlzOiAlKG1lc3NhZ2UpcyIpCiAgICAgICAgaWYgZm9yY2VfanNvbiBvciBvcy5nZXRlbnYoIkxPR19KU09OIiwgImZhbHNlIikubG93ZXIoKSBpbiB7IjEiLCJ0cnVlIiwieWVzIn06CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIGZyb20gcHl0aG9uanNvbmxvZ2dlciBpbXBvcnQganNvbmxvZ2dlciAgIyB0eXBlOiBpZ25vcmUKICAgICAgICAgICAgICAgIGhhbmRsZXIgPSBsb2dnaW5nLlN0cmVhbUhhbmRsZXIoKQogICAgICAgICAgICAgICAgaGFuZGxlci5zZXRGb3JtYXR0ZXIoanNvbmxvZ2dlci5Kc29uRm9ybWF0dGVyKCclKGFzY3RpbWUpcyAlKGxldmVsbmFtZSlzICUobmFtZSlzICUobWVzc2FnZSlzICUodHJhY2VfaWQpcyAlKHNwYW5faWQpcycpKQogICAgICAgICAgICAgICAgcm9vdCA9IGxvZ2dpbmcuZ2V0TG9nZ2VyKCkKICAgICAgICAgICAgICAgIGZvciBoIGluIGxpc3Qocm9vdC5oYW5kbGVycyk6CiAgICAgICAgICAgICAgICAgICAgcm9vdC5yZW1vdmVIYW5kbGVyKGgpCiAgICAgICAgICAgICAgICByb290LmFkZEhhbmRsZXIoaGFuZGxlcikKICAgICAgICAgICAgICAgIHJvb3Quc2V0TGV2ZWwoZGVzaXJlZF9sZXZlbCkKICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbjoKICAgICAgICAgICAgICAgICMgRmFsbGJhY2sgYWxyZWFkeSBjb25maWd1cmVkCiAgICAgICAgICAgICAgICBwYXNzCiAgICByZXR1cm4gbG9nZ2luZy5nZXRMb2dnZXIoX19uYW1lX18p",
      "if_exists": "skip",
      "phase": "apply",
      "dry_run_effect": "noop"
    },
    {
      "op": "write_file",
      "path": "tests/contracts/test_contract_missing_required_field__E1001.py",
      "content_base64": "aW1wb3J0IGpzb24KZnJvbSBwYXRobGliIGltcG9ydCBQYXRoCmltcG9ydCBweXRlc3QgICMgdHlwZTogaWdub3JlCmltcG9ydCBqc29uc2NoZW1hICAjIHR5cGU6IGlnbm9yZQoKCmRlZiBsb2FkX3NjaGVtYSgpIC0+IGRpY3Q6CiAgICBwID0gUGF0aCgnLmFpL3NjaGVtYXMvZXJyb3JfZXZlbnQuc2NoZW1hLmpzb24nKQogICAgYXNzZXJ0IHAuZXhpc3RzKCksIGYiU2NoZW1hIG1pc3Npbmc6IHtwfSIKICAgIHJldHVybiBqc29uLmxvYWRzKHAucmVhZF90ZXh0KGVuY29kaW5nPSd1dGYtOCcpKQoKCmRlZiB0ZXN0X2NvbnRyYWN0X21pc3NpbmdfcmVxdWlyZWRfZmllbGRfX0UxMDAxKCk6CiAgICBzY2hlbWEgPSBsb2FkX3NjaGVtYSgpCiAgICBwYXlsb2FkID0gewogICAgICAgICJraW5kIjogImVycm9yIiwKICAgICAgICAjICJlcnJvcl9jb2RlIjogIkUxMDAxIiwgICMgZGVsaWJlcmF0ZWx5IG1pc3NpbmcKICAgICAgICAibWVzc2FnZSI6ICJNaXNzaW5nIHJlcXVpcmVkIGZpZWxkIGVycm9yX2NvZGUiLAogICAgICAgICJ0aW1lc3RhbXAiOiAiMjAyNS0wMS0wMVQwMDowMDowMFoiLAogICAgICAgICJ0cmFjZV9pZCI6ICJhYmMxMjMiCiAgICB9CiAgICB3aXRoIHB5dGVzdC5yYWlzZXMoanNvbnNjaGVtYS5WYWxpZGF0aW9uRXJyb3IpOgogICAgICAgIGpzb25zY2hlbWEudmFsaWRhdGUoaW5zdGFuY2U9cGF5bG9hZCwgc2NoZW1hPXNjaGVtYSk=",
      "if_exists": "skip",
      "phase": "apply",
      "dry_run_effect": "noop"
    }
  ]
}
