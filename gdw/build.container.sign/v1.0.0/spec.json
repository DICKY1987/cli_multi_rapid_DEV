{
  "id": "build.container.sign",
  "version": "1.0.0",
  "summary": "Build a container image and produce a signature artifact",
  "maturity": "candidate",
  "owner": "platform-team",
  "inputs": {
    "dockerfile": {"type": "string", "default": "Dockerfile"},
    "context": {"type": "string", "default": "."},
    "image_tag": {"type": "string", "required": true}
  },
  "outputs": {"image_ref": "string", "signature_path": "string"},
  "steps": [
    {"id": "build", "runner": "docker", "cmd": "build -f ${dockerfile} -t ${image_tag} ${context}", "timeout_sec": 600},
    {"id": "sign", "runner": "bash", "cmd": "echo 'signed' > ./artifacts/${image_tag}.sig", "timeout_sec": 30}
  ],
  "determinism": {"tool_versions": {"docker": "24.0.0"}}
}
